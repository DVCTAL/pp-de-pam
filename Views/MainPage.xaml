<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="TestesPP.Views.MainPage">

    <ContentPage.Background>
        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#FF0080" Offset="0.0"/>
            <GradientStop Color="#7928CA" Offset="0.5"/>
            <GradientStop Color="#2AFADF" Offset="1.0"/>
        </LinearGradientBrush>
    </ContentPage.Background>

    <Grid Padding="24" RowDefinitions="Auto,Auto,*">

        <VerticalStackLayout Grid.Row="0" Spacing="6">
            <Label Text="WEATHER"
                   FontSize="42"
                   FontAttributes="Bold"
                   TextColor="White"/>

            <Label Text="Previsão criativa do tempo"
                   FontSize="18"
                   TextColor="#FDE68A"/>
        </VerticalStackLayout>

        <Grid Grid.Row="1" ColumnDefinitions="*,Auto" Margin="0,20,0,20">
            <Entry Placeholder="CEP"
                   Text="{Binding Cep}"
                   Keyboard="Numeric"
                   FontSize="18"
                   TextColor="Black"
                   BackgroundColor="White"/>

            <Button Grid.Column="1"
                    Text="GO"
                    Command="{Binding BuscarCommand}"
                    BackgroundColor="#22C55E"
                    TextColor="Black"
                    FontAttributes="Bold"
                    CornerRadius="14"
                    Margin="10,0,0,0"/>
        </Grid>

        <CollectionView Grid.Row="2"
                        ItemsSource="{Binding Previsoes}"
                        ItemsLayout="HorizontalList"
                        HorizontalScrollBarVisibility="Never">

            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame WidthRequest="260"
                           HeightRequest="360"
                           CornerRadius="30"
                           Margin="10"
                           Padding="20"
                           HasShadow="True">

                        <Frame.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                <GradientStop Color="#F97316" Offset="0.0"/>
                                <GradientStop Color="#FACC15" Offset="1.0"/>
                            </LinearGradientBrush>
                        </Frame.Background>

                        <VerticalStackLayout Spacing="14">

                            <HorizontalStackLayout Spacing="8">
                                <Label Text="{Binding DiaSemana}"
                                       FontSize="26"
                                       FontAttributes="Bold"
                                       TextColor="Black"/>

                                <Label Text="HOJE"
                                       FontSize="14"
                                       FontAttributes="Bold"
                                       TextColor="Red"
                                       IsVisible="{Binding EhHoje}"/>
                            </HorizontalStackLayout>

                            <Image Source="{Binding Icon}"
                                   WidthRequest="90"
                                   HeightRequest="90"
                                   HorizontalOptions="Center"/>

                            <Label Text="{Binding Condicao}"
                                   FontSize="20"
                                   FontAttributes="Bold"
                                   TextColor="Black"
                                   HorizontalTextAlignment="Center"/>

                            <VerticalStackLayout Spacing="6">
                                <Label Text="{Binding TempMax, StringFormat='🔥 Máx {0}°C'}"
                                       FontSize="18"
                                       TextColor="DarkRed"/>

                                <Label Text="{Binding TempMin, StringFormat='❄️ Mín {0}°C'}"
                                       FontSize="18"
                                       TextColor="DarkBlue"/>
                            </VerticalStackLayout>

                        </VerticalStackLayout>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>

        </CollectionView>

    </Grid>
</ContentPage>
